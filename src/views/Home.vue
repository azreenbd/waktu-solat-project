<template>
    <div class="p-3 max-width">
        <div v-if="!waktuSolat && isLoading" class="d-flex align-items-center h-100">
            <div class="loader"></div>
        </div>
        <div v-else-if="!waktuSolat && isError" class="d-flex align-items-center h-100">
            <div class="d-flex flex-column">
                <svg width="5.5em" height="5.5em" class="m-4 align-self-center" viewBox="0 0 300 375" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g><path d="M60.332,265.936c-2.665,0 -4.51,-1.332 -5.535,-3.997l-11.145,-28.44c-0.666,-1.793 -0.628,-3.305 0.115,-4.535c0.743,-1.229 2.063,-1.844 3.959,-1.844c1.127,-0 2.05,0.269 2.767,0.807c0.717,0.538 1.332,1.55 1.845,3.036l8.455,23.136l8.686,-23.751c0.819,-2.152 2.28,-3.228 4.381,-3.228c2.152,-0 3.612,1.076 4.381,3.228l8.686,23.982l8.532,-23.598c0.512,-1.383 1.166,-2.331 1.96,-2.844c0.794,-0.512 1.678,-0.768 2.652,-0.768c1.844,-0 3.049,0.653 3.612,1.96c0.564,1.306 0.513,2.78 -0.153,4.419l-11.069,28.44c-1.076,2.665 -2.921,3.997 -5.534,3.997c-2.716,0 -4.561,-1.332 -5.534,-3.997l-7.841,-20.83l-7.686,20.754c-0.974,2.715 -2.818,4.073 -5.534,4.073Zm62.644,0.154c-2.715,0 -5.137,-0.525 -7.263,-1.576c-2.127,-1.05 -3.792,-2.472 -4.997,-4.266c-1.204,-1.793 -1.806,-3.817 -1.806,-6.072c0,-2.767 0.718,-4.958 2.152,-6.572c1.435,-1.614 3.767,-2.78 6.995,-3.497c3.228,-0.718 7.558,-1.076 12.99,-1.076l2.69,-0l0,-1.614c0,-2.563 -0.563,-4.407 -1.691,-5.535c-1.127,-1.127 -3.023,-1.691 -5.688,-1.691c-1.486,0 -3.087,0.18 -4.804,0.538c-1.716,0.359 -3.523,0.974 -5.419,1.845c-1.229,0.564 -2.254,0.628 -3.074,0.192c-0.82,-0.435 -1.371,-1.127 -1.653,-2.075c-0.282,-0.948 -0.23,-1.909 0.154,-2.883c0.384,-0.973 1.166,-1.691 2.344,-2.152c2.358,-0.973 4.625,-1.665 6.803,-2.075c2.178,-0.41 4.163,-0.615 5.957,-0.615c5.483,-0 9.557,1.268 12.221,3.805c2.665,2.536 3.997,6.469 3.997,11.799l0,18.447c0,3.28 -1.486,4.919 -4.458,4.919c-3.023,0 -4.535,-1.639 -4.535,-4.919l0,-1.691c-0.871,2.101 -2.254,3.754 -4.15,4.958c-1.896,1.204 -4.151,1.806 -6.765,1.806Zm1.999,-6.61c2.511,-0 4.599,-0.871 6.264,-2.614c1.666,-1.742 2.498,-3.945 2.498,-6.61l0,-1.691l-2.613,-0c-4.817,-0 -8.16,0.371 -10.031,1.115c-1.87,0.743 -2.805,2.088 -2.805,4.035c-0,1.691 0.589,3.074 1.768,4.151c1.178,1.076 2.818,1.614 4.919,1.614Zm32.437,6.456c-3.177,0 -4.766,-1.639 -4.766,-4.919l0,-45.658c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,28.363l0.154,0l12.683,-13.374c1.025,-1.025 1.921,-1.819 2.69,-2.383c0.769,-0.563 1.819,-0.845 3.151,-0.845c1.333,-0 2.345,0.346 3.037,1.037c0.691,0.692 1.037,1.525 1.037,2.498c0,0.974 -0.461,1.948 -1.383,2.921l-11.53,12.145l12.836,13.836c0.923,0.973 1.346,1.96 1.269,2.959c-0.077,0.999 -0.5,1.819 -1.269,2.46c-0.768,0.64 -1.742,0.96 -2.92,0.96c-1.435,0 -2.575,-0.281 -3.421,-0.845c-0.845,-0.564 -1.781,-1.409 -2.805,-2.537l-13.375,-13.989l-0.154,-0l0,12.452c0,3.28 -1.614,4.919 -4.842,4.919Zm52.498,0.154c-9.941,0 -14.911,-4.919 -14.911,-14.758l-0,-16.372l-3.997,-0c-2.562,-0 -3.843,-1.204 -3.843,-3.613c-0,-2.408 1.281,-3.612 3.843,-3.612l3.997,-0l-0,-6.995c-0,-3.228 1.614,-4.843 4.842,-4.843c3.177,0 4.766,1.615 4.766,4.843l-0,6.995l8.147,-0c2.563,-0 3.844,1.204 3.844,3.612c-0,2.409 -1.281,3.613 -3.844,3.613l-8.147,-0l-0,15.834c-0,2.46 0.538,4.304 1.614,5.534c1.076,1.23 2.818,1.845 5.227,1.845c0.871,0 1.64,-0.077 2.306,-0.231c0.666,-0.153 1.255,-0.256 1.768,-0.307c0.615,-0.051 1.127,0.141 1.537,0.576c0.41,0.436 0.615,1.32 0.615,2.652c-0,1.025 -0.167,1.935 -0.5,2.729c-0.333,0.794 -0.935,1.345 -1.806,1.653c-0.666,0.205 -1.537,0.397 -2.614,0.576c-1.076,0.179 -2.024,0.269 -2.844,0.269Zm25.904,0c-9.224,0 -13.836,-5.175 -13.836,-15.527l0,-18.601c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,18.755c0,2.665 0.538,4.638 1.615,5.919c1.076,1.281 2.792,1.921 5.149,1.921c2.563,0 4.664,-0.884 6.303,-2.651c1.64,-1.768 2.46,-4.113 2.46,-7.034l0,-16.91c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,29.055c0,3.28 -1.563,4.919 -4.689,4.919c-3.125,0 -4.688,-1.639 -4.688,-4.919l-0,-1.307c-2.511,4.254 -6.355,6.38 -11.53,6.38Zm-138.565,66.991c-2.203,-0 -4.535,-0.231 -6.995,-0.692c-2.459,-0.461 -4.663,-1.255 -6.61,-2.383c-1.076,-0.615 -1.742,-1.37 -1.998,-2.267c-0.257,-0.897 -0.218,-1.742 0.115,-2.537c0.333,-0.794 0.897,-1.37 1.691,-1.729c0.794,-0.359 1.729,-0.282 2.805,0.23c2.05,0.974 3.972,1.653 5.765,2.037c1.794,0.385 3.562,0.577 5.304,0.577c2.46,-0 4.292,-0.423 5.496,-1.268c1.204,-0.846 1.806,-1.96 1.806,-3.344c0,-2.152 -1.588,-3.536 -4.765,-4.151l-7.687,-1.46c-6.508,-1.23 -9.762,-4.612 -9.762,-10.146c0,-2.46 0.679,-4.587 2.037,-6.38c1.358,-1.794 3.241,-3.177 5.65,-4.151c2.408,-0.973 5.175,-1.46 8.301,-1.46c4.509,-0 8.532,0.999 12.068,2.998c0.973,0.512 1.55,1.217 1.729,2.113c0.18,0.897 0.077,1.743 -0.307,2.537c-0.384,0.794 -0.987,1.358 -1.806,1.691c-0.82,0.333 -1.768,0.243 -2.844,-0.269c-1.589,-0.82 -3.113,-1.409 -4.574,-1.768c-1.46,-0.359 -2.857,-0.538 -4.189,-0.538c-2.511,-0 -4.369,0.435 -5.573,1.307c-1.204,0.871 -1.806,2.024 -1.806,3.458c-0,2.255 1.46,3.639 4.381,4.151l7.687,1.461c3.331,0.615 5.854,1.742 7.571,3.382c1.717,1.639 2.575,3.843 2.575,6.61c-0,3.741 -1.461,6.674 -4.381,8.801c-2.921,2.127 -6.816,3.19 -11.684,3.19Zm40.892,-0c-3.894,-0 -7.276,-0.794 -10.146,-2.383c-2.87,-1.588 -5.099,-3.856 -6.687,-6.802c-1.589,-2.947 -2.383,-6.419 -2.383,-10.416c-0,-3.997 0.794,-7.455 2.383,-10.376c1.588,-2.921 3.817,-5.176 6.687,-6.764c2.87,-1.589 6.252,-2.383 10.146,-2.383c3.895,-0 7.277,0.794 10.146,2.383c2.87,1.588 5.099,3.843 6.688,6.764c1.588,2.921 2.382,6.379 2.382,10.376c0,3.997 -0.794,7.469 -2.382,10.416c-1.589,2.946 -3.818,5.214 -6.688,6.802c-2.869,1.589 -6.251,2.383 -10.146,2.383Zm0,-7.302c2.87,-0 5.176,-1.038 6.918,-3.113c1.742,-2.076 2.613,-5.137 2.613,-9.186c0,-4.099 -0.871,-7.161 -2.613,-9.185c-1.742,-2.024 -4.048,-3.036 -6.918,-3.036c-2.869,-0 -5.175,1.012 -6.918,3.036c-1.742,2.024 -2.613,5.086 -2.613,9.185c-0,4.049 0.871,7.11 2.613,9.186c1.743,2.075 4.049,3.113 6.918,3.113Zm39.97,7.302c-8.558,-0 -12.837,-4.791 -12.837,-14.374l0,-36.357c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.843,1.614 4.843,4.842l-0,35.896c-0,4.612 1.921,6.918 5.764,6.918c0.41,-0 0.795,-0.013 1.153,-0.039c0.359,-0.025 0.718,-0.064 1.076,-0.115c0.718,-0.102 1.205,0.09 1.461,0.577c0.256,0.486 0.384,1.473 0.384,2.959c0,1.281 -0.256,2.28 -0.768,2.998c-0.513,0.717 -1.358,1.153 -2.537,1.306c-1.076,0.154 -2.178,0.231 -3.305,0.231Zm24.059,-0c-2.716,-0 -5.138,-0.525 -7.264,-1.576c-2.127,-1.05 -3.792,-2.472 -4.996,-4.266c-1.205,-1.793 -1.807,-3.817 -1.807,-6.072c0,-2.767 0.718,-4.958 2.152,-6.572c1.435,-1.614 3.767,-2.78 6.995,-3.497c3.229,-0.718 7.559,-1.076 12.99,-1.076l2.691,-0l-0,-1.615c-0,-2.562 -0.564,-4.407 -1.691,-5.534c-1.128,-1.127 -3.024,-1.691 -5.688,-1.691c-1.486,0 -3.088,0.179 -4.804,0.538c-1.717,0.359 -3.523,0.974 -5.419,1.845c-1.23,0.564 -2.255,0.628 -3.075,0.192c-0.82,-0.436 -1.371,-1.127 -1.653,-2.075c-0.281,-0.948 -0.23,-1.909 0.154,-2.883c0.384,-0.973 1.166,-1.691 2.344,-2.152c2.358,-0.974 4.625,-1.665 6.803,-2.075c2.178,-0.41 4.164,-0.615 5.957,-0.615c5.483,-0 9.557,1.268 12.222,3.805c2.664,2.536 3.997,6.469 3.997,11.798l-0,18.448c-0,3.279 -1.487,4.919 -4.459,4.919c-3.023,0 -4.535,-1.64 -4.535,-4.919l0,-1.691c-0.871,2.101 -2.254,3.753 -4.15,4.958c-1.896,1.204 -4.151,1.806 -6.764,1.806Zm1.998,-6.61c2.511,-0 4.599,-0.872 6.264,-2.614c1.666,-1.742 2.499,-3.946 2.499,-6.61l-0,-1.691l-2.614,-0c-4.817,-0 -8.16,0.371 -10.031,1.114c-1.87,0.743 -2.805,2.088 -2.805,4.036c-0,1.691 0.589,3.074 1.768,4.15c1.178,1.077 2.818,1.615 4.919,1.615Zm44.889,6.61c-9.941,-0 -14.912,-4.919 -14.912,-14.758l0,-16.372l-3.997,-0c-2.562,-0 -3.843,-1.205 -3.843,-3.613c0,-2.408 1.281,-3.613 3.843,-3.613l3.997,0l0,-6.994c0,-3.229 1.614,-4.843 4.843,-4.843c3.177,0 4.765,1.614 4.765,4.843l0,6.994l8.148,0c2.562,0 3.843,1.205 3.843,3.613c0,2.408 -1.281,3.613 -3.843,3.613l-8.148,-0l0,15.834c0,2.46 0.538,4.304 1.615,5.534c1.076,1.23 2.818,1.845 5.226,1.845c0.871,-0 1.64,-0.077 2.306,-0.231c0.666,-0.153 1.256,-0.256 1.768,-0.307c0.615,-0.051 1.128,0.141 1.537,0.576c0.41,0.436 0.615,1.32 0.615,2.652c0,1.025 -0.166,1.935 -0.499,2.729c-0.333,0.794 -0.935,1.345 -1.807,1.652c-0.666,0.205 -1.537,0.398 -2.613,0.577c-1.076,0.179 -2.024,0.269 -2.844,0.269Z" style="fill:#a2a2a2;fill-rule:nonzero;"/><path d="M171.05,51.345c-10.297,9.337 -26.238,8.558 -35.576,-1.739c-9.337,-10.297 -8.558,-26.238 1.739,-35.575m122.143,346.937c6.962,0 13.639,-2.765 18.562,-7.688c4.924,-4.923 7.69,-11.6 7.69,-18.562l-0,-99.814c-0,0 3.748,-45.308 -25.458,-79.304c-13.222,-15.39 -27.381,-23.857 -62.374,-42.736c-36.468,-19.675 -47.522,-43.171 -47.522,-43.171l-0.508,-0.018c0,0 -11.054,23.496 -47.522,43.171c-34.993,18.879 -49.152,27.346 -62.374,42.736c-29.206,33.996 -25.458,79.305 -25.458,79.305l0,99.816c0,14.497 11.752,26.249 26.249,26.25c51.849,0.004 166.863,0.011 218.715,0.015Z" style="fill:none;stroke:#e0e0e0;stroke-width:15px;"/></g></svg>
                <p class="align-self-center">Ralat memuatkan data.</p>
                <small class="text-muted align-self-center">Maaf, terdapat masalah untuk memuatkan laman web. Sila cuba lagi.</small>
            </div>
        </div>
        <div v-else class="d-flex align-items-center h-100">
            <div>
                <div class="d-flex align-items-end m-1 mb-3">
                    <!-- Custom svg -->
                    <svg v-if="darkMode" width="5.5em" height="5.5em" class="mr-1" viewBox="0 0 300 375" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g><path d="M60.332,265.936c-2.665,0 -4.51,-1.332 -5.535,-3.997l-11.145,-28.44c-0.666,-1.793 -0.628,-3.305 0.115,-4.535c0.743,-1.229 2.063,-1.844 3.959,-1.844c1.127,-0 2.05,0.269 2.767,0.807c0.717,0.538 1.332,1.55 1.845,3.036l8.455,23.136l8.686,-23.751c0.819,-2.152 2.28,-3.228 4.381,-3.228c2.152,-0 3.612,1.076 4.381,3.228l8.686,23.982l8.532,-23.598c0.512,-1.383 1.166,-2.331 1.96,-2.844c0.794,-0.512 1.678,-0.768 2.652,-0.768c1.844,-0 3.049,0.653 3.612,1.96c0.564,1.306 0.513,2.78 -0.153,4.419l-11.069,28.44c-1.076,2.665 -2.921,3.997 -5.534,3.997c-2.716,0 -4.561,-1.332 -5.534,-3.997l-7.841,-20.83l-7.686,20.754c-0.974,2.715 -2.818,4.073 -5.534,4.073Zm62.644,0.154c-2.715,0 -5.137,-0.525 -7.263,-1.576c-2.127,-1.05 -3.792,-2.472 -4.997,-4.266c-1.204,-1.793 -1.806,-3.817 -1.806,-6.072c0,-2.767 0.718,-4.958 2.152,-6.572c1.435,-1.614 3.767,-2.78 6.995,-3.497c3.228,-0.718 7.558,-1.076 12.99,-1.076l2.69,-0l0,-1.614c0,-2.563 -0.563,-4.407 -1.691,-5.535c-1.127,-1.127 -3.023,-1.691 -5.688,-1.691c-1.486,0 -3.087,0.18 -4.804,0.538c-1.716,0.359 -3.523,0.974 -5.419,1.845c-1.229,0.564 -2.254,0.628 -3.074,0.192c-0.82,-0.435 -1.371,-1.127 -1.653,-2.075c-0.282,-0.948 -0.23,-1.909 0.154,-2.883c0.384,-0.973 1.166,-1.691 2.344,-2.152c2.358,-0.973 4.625,-1.665 6.803,-2.075c2.178,-0.41 4.163,-0.615 5.957,-0.615c5.483,-0 9.557,1.268 12.221,3.805c2.665,2.536 3.997,6.469 3.997,11.799l0,18.447c0,3.28 -1.486,4.919 -4.458,4.919c-3.023,0 -4.535,-1.639 -4.535,-4.919l0,-1.691c-0.871,2.101 -2.254,3.754 -4.15,4.958c-1.896,1.204 -4.151,1.806 -6.765,1.806Zm1.999,-6.61c2.511,-0 4.599,-0.871 6.264,-2.614c1.666,-1.742 2.498,-3.945 2.498,-6.61l0,-1.691l-2.613,-0c-4.817,-0 -8.16,0.371 -10.031,1.115c-1.87,0.743 -2.805,2.088 -2.805,4.035c-0,1.691 0.589,3.074 1.768,4.151c1.178,1.076 2.818,1.614 4.919,1.614Zm32.437,6.456c-3.177,0 -4.766,-1.639 -4.766,-4.919l0,-45.658c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,28.363l0.154,0l12.683,-13.374c1.025,-1.025 1.921,-1.819 2.69,-2.383c0.769,-0.563 1.819,-0.845 3.151,-0.845c1.333,-0 2.345,0.346 3.037,1.037c0.691,0.692 1.037,1.525 1.037,2.498c0,0.974 -0.461,1.948 -1.383,2.921l-11.53,12.145l12.836,13.836c0.923,0.973 1.346,1.96 1.269,2.959c-0.077,0.999 -0.5,1.819 -1.269,2.46c-0.768,0.64 -1.742,0.96 -2.92,0.96c-1.435,0 -2.575,-0.281 -3.421,-0.845c-0.845,-0.564 -1.781,-1.409 -2.805,-2.537l-13.375,-13.989l-0.154,-0l0,12.452c0,3.28 -1.614,4.919 -4.842,4.919Zm52.498,0.154c-9.941,0 -14.911,-4.919 -14.911,-14.758l-0,-16.372l-3.997,-0c-2.562,-0 -3.843,-1.204 -3.843,-3.613c-0,-2.408 1.281,-3.612 3.843,-3.612l3.997,-0l-0,-6.995c-0,-3.228 1.614,-4.843 4.842,-4.843c3.177,0 4.766,1.615 4.766,4.843l-0,6.995l8.147,-0c2.563,-0 3.844,1.204 3.844,3.612c-0,2.409 -1.281,3.613 -3.844,3.613l-8.147,-0l-0,15.834c-0,2.46 0.538,4.304 1.614,5.534c1.076,1.23 2.818,1.845 5.227,1.845c0.871,0 1.64,-0.077 2.306,-0.231c0.666,-0.153 1.255,-0.256 1.768,-0.307c0.615,-0.051 1.127,0.141 1.537,0.576c0.41,0.436 0.615,1.32 0.615,2.652c-0,1.025 -0.167,1.935 -0.5,2.729c-0.333,0.794 -0.935,1.345 -1.806,1.653c-0.666,0.205 -1.537,0.397 -2.614,0.576c-1.076,0.179 -2.024,0.269 -2.844,0.269Zm25.904,0c-9.224,0 -13.836,-5.175 -13.836,-15.527l0,-18.601c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,18.755c0,2.665 0.538,4.638 1.615,5.919c1.076,1.281 2.792,1.921 5.149,1.921c2.563,0 4.664,-0.884 6.303,-2.651c1.64,-1.768 2.46,-4.113 2.46,-7.034l0,-16.91c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,29.055c0,3.28 -1.563,4.919 -4.689,4.919c-3.125,0 -4.688,-1.639 -4.688,-4.919l-0,-1.307c-2.511,4.254 -6.355,6.38 -11.53,6.38Zm-138.565,66.991c-2.203,-0 -4.535,-0.231 -6.995,-0.692c-2.459,-0.461 -4.663,-1.255 -6.61,-2.383c-1.076,-0.615 -1.742,-1.37 -1.998,-2.267c-0.257,-0.897 -0.218,-1.742 0.115,-2.537c0.333,-0.794 0.897,-1.37 1.691,-1.729c0.794,-0.359 1.729,-0.282 2.805,0.23c2.05,0.974 3.972,1.653 5.765,2.037c1.794,0.385 3.562,0.577 5.304,0.577c2.46,-0 4.292,-0.423 5.496,-1.268c1.204,-0.846 1.806,-1.96 1.806,-3.344c0,-2.152 -1.588,-3.536 -4.765,-4.151l-7.687,-1.46c-6.508,-1.23 -9.762,-4.612 -9.762,-10.146c0,-2.46 0.679,-4.587 2.037,-6.38c1.358,-1.794 3.241,-3.177 5.65,-4.151c2.408,-0.973 5.175,-1.46 8.301,-1.46c4.509,-0 8.532,0.999 12.068,2.998c0.973,0.512 1.55,1.217 1.729,2.113c0.18,0.897 0.077,1.743 -0.307,2.537c-0.384,0.794 -0.987,1.358 -1.806,1.691c-0.82,0.333 -1.768,0.243 -2.844,-0.269c-1.589,-0.82 -3.113,-1.409 -4.574,-1.768c-1.46,-0.359 -2.857,-0.538 -4.189,-0.538c-2.511,-0 -4.369,0.435 -5.573,1.307c-1.204,0.871 -1.806,2.024 -1.806,3.458c-0,2.255 1.46,3.639 4.381,4.151l7.687,1.461c3.331,0.615 5.854,1.742 7.571,3.382c1.717,1.639 2.575,3.843 2.575,6.61c-0,3.741 -1.461,6.674 -4.381,8.801c-2.921,2.127 -6.816,3.19 -11.684,3.19Zm40.892,-0c-3.894,-0 -7.276,-0.794 -10.146,-2.383c-2.87,-1.588 -5.099,-3.856 -6.687,-6.802c-1.589,-2.947 -2.383,-6.419 -2.383,-10.416c-0,-3.997 0.794,-7.455 2.383,-10.376c1.588,-2.921 3.817,-5.176 6.687,-6.764c2.87,-1.589 6.252,-2.383 10.146,-2.383c3.895,-0 7.277,0.794 10.146,2.383c2.87,1.588 5.099,3.843 6.688,6.764c1.588,2.921 2.382,6.379 2.382,10.376c0,3.997 -0.794,7.469 -2.382,10.416c-1.589,2.946 -3.818,5.214 -6.688,6.802c-2.869,1.589 -6.251,2.383 -10.146,2.383Zm0,-7.302c2.87,-0 5.176,-1.038 6.918,-3.113c1.742,-2.076 2.613,-5.137 2.613,-9.186c0,-4.099 -0.871,-7.161 -2.613,-9.185c-1.742,-2.024 -4.048,-3.036 -6.918,-3.036c-2.869,-0 -5.175,1.012 -6.918,3.036c-1.742,2.024 -2.613,5.086 -2.613,9.185c-0,4.049 0.871,7.11 2.613,9.186c1.743,2.075 4.049,3.113 6.918,3.113Zm39.97,7.302c-8.558,-0 -12.837,-4.791 -12.837,-14.374l0,-36.357c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.843,1.614 4.843,4.842l-0,35.896c-0,4.612 1.921,6.918 5.764,6.918c0.41,-0 0.795,-0.013 1.153,-0.039c0.359,-0.025 0.718,-0.064 1.076,-0.115c0.718,-0.102 1.205,0.09 1.461,0.577c0.256,0.486 0.384,1.473 0.384,2.959c0,1.281 -0.256,2.28 -0.768,2.998c-0.513,0.717 -1.358,1.153 -2.537,1.306c-1.076,0.154 -2.178,0.231 -3.305,0.231Zm24.059,-0c-2.716,-0 -5.138,-0.525 -7.264,-1.576c-2.127,-1.05 -3.792,-2.472 -4.996,-4.266c-1.205,-1.793 -1.807,-3.817 -1.807,-6.072c0,-2.767 0.718,-4.958 2.152,-6.572c1.435,-1.614 3.767,-2.78 6.995,-3.497c3.229,-0.718 7.559,-1.076 12.99,-1.076l2.691,-0l-0,-1.615c-0,-2.562 -0.564,-4.407 -1.691,-5.534c-1.128,-1.127 -3.024,-1.691 -5.688,-1.691c-1.486,0 -3.088,0.179 -4.804,0.538c-1.717,0.359 -3.523,0.974 -5.419,1.845c-1.23,0.564 -2.255,0.628 -3.075,0.192c-0.82,-0.436 -1.371,-1.127 -1.653,-2.075c-0.281,-0.948 -0.23,-1.909 0.154,-2.883c0.384,-0.973 1.166,-1.691 2.344,-2.152c2.358,-0.974 4.625,-1.665 6.803,-2.075c2.178,-0.41 4.164,-0.615 5.957,-0.615c5.483,-0 9.557,1.268 12.222,3.805c2.664,2.536 3.997,6.469 3.997,11.798l-0,18.448c-0,3.279 -1.487,4.919 -4.459,4.919c-3.023,0 -4.535,-1.64 -4.535,-4.919l0,-1.691c-0.871,2.101 -2.254,3.753 -4.15,4.958c-1.896,1.204 -4.151,1.806 -6.764,1.806Zm1.998,-6.61c2.511,-0 4.599,-0.872 6.264,-2.614c1.666,-1.742 2.499,-3.946 2.499,-6.61l-0,-1.691l-2.614,-0c-4.817,-0 -8.16,0.371 -10.031,1.114c-1.87,0.743 -2.805,2.088 -2.805,4.036c-0,1.691 0.589,3.074 1.768,4.15c1.178,1.077 2.818,1.615 4.919,1.615Zm44.889,6.61c-9.941,-0 -14.912,-4.919 -14.912,-14.758l0,-16.372l-3.997,-0c-2.562,-0 -3.843,-1.205 -3.843,-3.613c0,-2.408 1.281,-3.613 3.843,-3.613l3.997,0l0,-6.994c0,-3.229 1.614,-4.843 4.843,-4.843c3.177,0 4.765,1.614 4.765,4.843l0,6.994l8.148,0c2.562,0 3.843,1.205 3.843,3.613c0,2.408 -1.281,3.613 -3.843,3.613l-8.148,-0l0,15.834c0,2.46 0.538,4.304 1.615,5.534c1.076,1.23 2.818,1.845 5.226,1.845c0.871,-0 1.64,-0.077 2.306,-0.231c0.666,-0.153 1.256,-0.256 1.768,-0.307c0.615,-0.051 1.128,0.141 1.537,0.576c0.41,0.436 0.615,1.32 0.615,2.652c0,1.025 -0.166,1.935 -0.499,2.729c-0.333,0.794 -0.935,1.345 -1.807,1.652c-0.666,0.205 -1.537,0.398 -2.613,0.577c-1.076,0.179 -2.024,0.269 -2.844,0.269Z" style="fill:#e7f2f5;fill-rule:nonzero;"/><path d="M171.05,51.345c-10.297,9.337 -26.238,8.558 -35.576,-1.739c-9.337,-10.297 -8.558,-26.238 1.739,-35.575m122.143,346.937c6.962,0 13.639,-2.765 18.562,-7.688c4.924,-4.923 7.69,-11.6 7.69,-18.562l-0,-99.814c-0,0 3.748,-45.308 -25.458,-79.304c-13.222,-15.39 -27.381,-23.857 -62.374,-42.736c-36.468,-19.675 -47.522,-43.171 -47.522,-43.171l-0.508,-0.018c0,0 -11.054,23.496 -47.522,43.171c-34.993,18.879 -49.152,27.346 -62.374,42.736c-29.206,33.996 -25.458,79.305 -25.458,79.305l0,99.816c0,14.497 11.752,26.249 26.249,26.25c51.849,0.004 166.863,0.011 218.715,0.015Z" style="fill:none;stroke:#0adf3f;stroke-width:15px;"/></g></svg>
                    <svg v-else width="5.5em" height="5.5em" class="mr-1" viewBox="0 0 300 375" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g><path d="M60.332,265.936c-2.665,0 -4.51,-1.332 -5.535,-3.997l-11.145,-28.44c-0.666,-1.793 -0.628,-3.305 0.115,-4.535c0.743,-1.229 2.063,-1.844 3.959,-1.844c1.127,-0 2.05,0.269 2.767,0.807c0.717,0.538 1.332,1.55 1.845,3.036l8.455,23.136l8.686,-23.751c0.819,-2.152 2.28,-3.228 4.381,-3.228c2.152,-0 3.612,1.076 4.381,3.228l8.686,23.982l8.532,-23.598c0.512,-1.383 1.166,-2.331 1.96,-2.844c0.794,-0.512 1.678,-0.768 2.652,-0.768c1.844,-0 3.049,0.653 3.612,1.96c0.564,1.306 0.513,2.78 -0.153,4.419l-11.069,28.44c-1.076,2.665 -2.921,3.997 -5.534,3.997c-2.716,0 -4.561,-1.332 -5.534,-3.997l-7.841,-20.83l-7.686,20.754c-0.974,2.715 -2.818,4.073 -5.534,4.073Zm62.644,0.154c-2.715,0 -5.137,-0.525 -7.263,-1.576c-2.127,-1.05 -3.792,-2.472 -4.997,-4.266c-1.204,-1.793 -1.806,-3.817 -1.806,-6.072c0,-2.767 0.718,-4.958 2.152,-6.572c1.435,-1.614 3.767,-2.78 6.995,-3.497c3.228,-0.718 7.558,-1.076 12.99,-1.076l2.69,-0l0,-1.614c0,-2.563 -0.563,-4.407 -1.691,-5.535c-1.127,-1.127 -3.023,-1.691 -5.688,-1.691c-1.486,0 -3.087,0.18 -4.804,0.538c-1.716,0.359 -3.523,0.974 -5.419,1.845c-1.229,0.564 -2.254,0.628 -3.074,0.192c-0.82,-0.435 -1.371,-1.127 -1.653,-2.075c-0.282,-0.948 -0.23,-1.909 0.154,-2.883c0.384,-0.973 1.166,-1.691 2.344,-2.152c2.358,-0.973 4.625,-1.665 6.803,-2.075c2.178,-0.41 4.163,-0.615 5.957,-0.615c5.483,-0 9.557,1.268 12.221,3.805c2.665,2.536 3.997,6.469 3.997,11.799l0,18.447c0,3.28 -1.486,4.919 -4.458,4.919c-3.023,0 -4.535,-1.639 -4.535,-4.919l0,-1.691c-0.871,2.101 -2.254,3.754 -4.15,4.958c-1.896,1.204 -4.151,1.806 -6.765,1.806Zm1.999,-6.61c2.511,-0 4.599,-0.871 6.264,-2.614c1.666,-1.742 2.498,-3.945 2.498,-6.61l0,-1.691l-2.613,-0c-4.817,-0 -8.16,0.371 -10.031,1.115c-1.87,0.743 -2.805,2.088 -2.805,4.035c-0,1.691 0.589,3.074 1.768,4.151c1.178,1.076 2.818,1.614 4.919,1.614Zm32.437,6.456c-3.177,0 -4.766,-1.639 -4.766,-4.919l0,-45.658c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,28.363l0.154,0l12.683,-13.374c1.025,-1.025 1.921,-1.819 2.69,-2.383c0.769,-0.563 1.819,-0.845 3.151,-0.845c1.333,-0 2.345,0.346 3.037,1.037c0.691,0.692 1.037,1.525 1.037,2.498c0,0.974 -0.461,1.948 -1.383,2.921l-11.53,12.145l12.836,13.836c0.923,0.973 1.346,1.96 1.269,2.959c-0.077,0.999 -0.5,1.819 -1.269,2.46c-0.768,0.64 -1.742,0.96 -2.92,0.96c-1.435,0 -2.575,-0.281 -3.421,-0.845c-0.845,-0.564 -1.781,-1.409 -2.805,-2.537l-13.375,-13.989l-0.154,-0l0,12.452c0,3.28 -1.614,4.919 -4.842,4.919Zm52.498,0.154c-9.941,0 -14.911,-4.919 -14.911,-14.758l-0,-16.372l-3.997,-0c-2.562,-0 -3.843,-1.204 -3.843,-3.613c-0,-2.408 1.281,-3.612 3.843,-3.612l3.997,-0l-0,-6.995c-0,-3.228 1.614,-4.843 4.842,-4.843c3.177,0 4.766,1.615 4.766,4.843l-0,6.995l8.147,-0c2.563,-0 3.844,1.204 3.844,3.612c-0,2.409 -1.281,3.613 -3.844,3.613l-8.147,-0l-0,15.834c-0,2.46 0.538,4.304 1.614,5.534c1.076,1.23 2.818,1.845 5.227,1.845c0.871,0 1.64,-0.077 2.306,-0.231c0.666,-0.153 1.255,-0.256 1.768,-0.307c0.615,-0.051 1.127,0.141 1.537,0.576c0.41,0.436 0.615,1.32 0.615,2.652c-0,1.025 -0.167,1.935 -0.5,2.729c-0.333,0.794 -0.935,1.345 -1.806,1.653c-0.666,0.205 -1.537,0.397 -2.614,0.576c-1.076,0.179 -2.024,0.269 -2.844,0.269Zm25.904,0c-9.224,0 -13.836,-5.175 -13.836,-15.527l0,-18.601c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,18.755c0,2.665 0.538,4.638 1.615,5.919c1.076,1.281 2.792,1.921 5.149,1.921c2.563,0 4.664,-0.884 6.303,-2.651c1.64,-1.768 2.46,-4.113 2.46,-7.034l0,-16.91c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.842,1.614 4.842,4.842l0,29.055c0,3.28 -1.563,4.919 -4.689,4.919c-3.125,0 -4.688,-1.639 -4.688,-4.919l-0,-1.307c-2.511,4.254 -6.355,6.38 -11.53,6.38Zm-138.565,66.991c-2.203,-0 -4.535,-0.231 -6.995,-0.692c-2.459,-0.461 -4.663,-1.255 -6.61,-2.383c-1.076,-0.615 -1.742,-1.37 -1.998,-2.267c-0.257,-0.897 -0.218,-1.742 0.115,-2.537c0.333,-0.794 0.897,-1.37 1.691,-1.729c0.794,-0.359 1.729,-0.282 2.805,0.23c2.05,0.974 3.972,1.653 5.765,2.037c1.794,0.385 3.562,0.577 5.304,0.577c2.46,-0 4.292,-0.423 5.496,-1.268c1.204,-0.846 1.806,-1.96 1.806,-3.344c0,-2.152 -1.588,-3.536 -4.765,-4.151l-7.687,-1.46c-6.508,-1.23 -9.762,-4.612 -9.762,-10.146c0,-2.46 0.679,-4.587 2.037,-6.38c1.358,-1.794 3.241,-3.177 5.65,-4.151c2.408,-0.973 5.175,-1.46 8.301,-1.46c4.509,-0 8.532,0.999 12.068,2.998c0.973,0.512 1.55,1.217 1.729,2.113c0.18,0.897 0.077,1.743 -0.307,2.537c-0.384,0.794 -0.987,1.358 -1.806,1.691c-0.82,0.333 -1.768,0.243 -2.844,-0.269c-1.589,-0.82 -3.113,-1.409 -4.574,-1.768c-1.46,-0.359 -2.857,-0.538 -4.189,-0.538c-2.511,-0 -4.369,0.435 -5.573,1.307c-1.204,0.871 -1.806,2.024 -1.806,3.458c-0,2.255 1.46,3.639 4.381,4.151l7.687,1.461c3.331,0.615 5.854,1.742 7.571,3.382c1.717,1.639 2.575,3.843 2.575,6.61c-0,3.741 -1.461,6.674 -4.381,8.801c-2.921,2.127 -6.816,3.19 -11.684,3.19Zm40.892,-0c-3.894,-0 -7.276,-0.794 -10.146,-2.383c-2.87,-1.588 -5.099,-3.856 -6.687,-6.802c-1.589,-2.947 -2.383,-6.419 -2.383,-10.416c-0,-3.997 0.794,-7.455 2.383,-10.376c1.588,-2.921 3.817,-5.176 6.687,-6.764c2.87,-1.589 6.252,-2.383 10.146,-2.383c3.895,-0 7.277,0.794 10.146,2.383c2.87,1.588 5.099,3.843 6.688,6.764c1.588,2.921 2.382,6.379 2.382,10.376c0,3.997 -0.794,7.469 -2.382,10.416c-1.589,2.946 -3.818,5.214 -6.688,6.802c-2.869,1.589 -6.251,2.383 -10.146,2.383Zm0,-7.302c2.87,-0 5.176,-1.038 6.918,-3.113c1.742,-2.076 2.613,-5.137 2.613,-9.186c0,-4.099 -0.871,-7.161 -2.613,-9.185c-1.742,-2.024 -4.048,-3.036 -6.918,-3.036c-2.869,-0 -5.175,1.012 -6.918,3.036c-1.742,2.024 -2.613,5.086 -2.613,9.185c-0,4.049 0.871,7.11 2.613,9.186c1.743,2.075 4.049,3.113 6.918,3.113Zm39.97,7.302c-8.558,-0 -12.837,-4.791 -12.837,-14.374l0,-36.357c0,-3.228 1.589,-4.842 4.766,-4.842c3.228,-0 4.843,1.614 4.843,4.842l-0,35.896c-0,4.612 1.921,6.918 5.764,6.918c0.41,-0 0.795,-0.013 1.153,-0.039c0.359,-0.025 0.718,-0.064 1.076,-0.115c0.718,-0.102 1.205,0.09 1.461,0.577c0.256,0.486 0.384,1.473 0.384,2.959c0,1.281 -0.256,2.28 -0.768,2.998c-0.513,0.717 -1.358,1.153 -2.537,1.306c-1.076,0.154 -2.178,0.231 -3.305,0.231Zm24.059,-0c-2.716,-0 -5.138,-0.525 -7.264,-1.576c-2.127,-1.05 -3.792,-2.472 -4.996,-4.266c-1.205,-1.793 -1.807,-3.817 -1.807,-6.072c0,-2.767 0.718,-4.958 2.152,-6.572c1.435,-1.614 3.767,-2.78 6.995,-3.497c3.229,-0.718 7.559,-1.076 12.99,-1.076l2.691,-0l-0,-1.615c-0,-2.562 -0.564,-4.407 -1.691,-5.534c-1.128,-1.127 -3.024,-1.691 -5.688,-1.691c-1.486,0 -3.088,0.179 -4.804,0.538c-1.717,0.359 -3.523,0.974 -5.419,1.845c-1.23,0.564 -2.255,0.628 -3.075,0.192c-0.82,-0.436 -1.371,-1.127 -1.653,-2.075c-0.281,-0.948 -0.23,-1.909 0.154,-2.883c0.384,-0.973 1.166,-1.691 2.344,-2.152c2.358,-0.974 4.625,-1.665 6.803,-2.075c2.178,-0.41 4.164,-0.615 5.957,-0.615c5.483,-0 9.557,1.268 12.222,3.805c2.664,2.536 3.997,6.469 3.997,11.798l-0,18.448c-0,3.279 -1.487,4.919 -4.459,4.919c-3.023,0 -4.535,-1.64 -4.535,-4.919l0,-1.691c-0.871,2.101 -2.254,3.753 -4.15,4.958c-1.896,1.204 -4.151,1.806 -6.764,1.806Zm1.998,-6.61c2.511,-0 4.599,-0.872 6.264,-2.614c1.666,-1.742 2.499,-3.946 2.499,-6.61l-0,-1.691l-2.614,-0c-4.817,-0 -8.16,0.371 -10.031,1.114c-1.87,0.743 -2.805,2.088 -2.805,4.036c-0,1.691 0.589,3.074 1.768,4.15c1.178,1.077 2.818,1.615 4.919,1.615Zm44.889,6.61c-9.941,-0 -14.912,-4.919 -14.912,-14.758l0,-16.372l-3.997,-0c-2.562,-0 -3.843,-1.205 -3.843,-3.613c0,-2.408 1.281,-3.613 3.843,-3.613l3.997,0l0,-6.994c0,-3.229 1.614,-4.843 4.843,-4.843c3.177,0 4.765,1.614 4.765,4.843l0,6.994l8.148,0c2.562,0 3.843,1.205 3.843,3.613c0,2.408 -1.281,3.613 -3.843,3.613l-8.148,-0l0,15.834c0,2.46 0.538,4.304 1.615,5.534c1.076,1.23 2.818,1.845 5.226,1.845c0.871,-0 1.64,-0.077 2.306,-0.231c0.666,-0.153 1.256,-0.256 1.768,-0.307c0.615,-0.051 1.128,0.141 1.537,0.576c0.41,0.436 0.615,1.32 0.615,2.652c0,1.025 -0.166,1.935 -0.499,2.729c-0.333,0.794 -0.935,1.345 -1.807,1.652c-0.666,0.205 -1.537,0.398 -2.613,0.577c-1.076,0.179 -2.024,0.269 -2.844,0.269Z" style="fill:#555555;fill-rule:nonzero;"/><path d="M171.05,51.345c-10.297,9.337 -26.238,8.558 -35.576,-1.739c-9.337,-10.297 -8.558,-26.238 1.739,-35.575m122.143,346.937c6.962,0 13.639,-2.765 18.562,-7.688c4.924,-4.923 7.69,-11.6 7.69,-18.562l-0,-99.814c-0,0 3.748,-45.308 -25.458,-79.304c-13.222,-15.39 -27.381,-23.857 -62.374,-42.736c-36.468,-19.675 -47.522,-43.171 -47.522,-43.171l-0.508,-0.018c0,0 -11.054,23.496 -47.522,43.171c-34.993,18.879 -49.152,27.346 -62.374,42.736c-29.206,33.996 -25.458,79.305 -25.458,79.305l0,99.816c0,14.497 11.752,26.249 26.249,26.25c51.849,0.004 166.863,0.011 218.715,0.015Z" style="fill:none;stroke:#0adf3f;stroke-width:15px;"/></g></svg>
                    

                    <h2 class="m-0">{{ getZone(zoneId).state }}</h2>
                </div>
                
                <div class="box" :class="{ dark: darkMode }">
                    <b-form-select v-model="zoneId" :options="options" class="mb-4" :class="{ dark: darkMode }" @change="getWaktuSolat(interval, zoneId)"></b-form-select>

                    <div>
                        <div class="pl-1 mb-5">
                            <p class="text-muted mb-2">{{ translateDay(waktuSolat[0].day) }}, {{ formatDate(waktuSolat[0].date) }}</p>    

                            <h1 class="text-green">{{ nowSolat.name }}</h1>
                            <h3>{{ formatTime(nowSolat.time) }}</h3>
                        </div>
                        <div class="d-flex flex-wrap">
                            <div class="sub-box" :class="{ dark: darkMode }">
                                <div class="mb-3 title">Imsak</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].imsak) }}</div>
                            </div>
                            <div class="sub-box" :class="{ active: isSubuh, dark: darkMode }">
                                <div class="mb-3 title">Subuh</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].fajr) }}</div>
                            </div>
                            <div class="sub-box" :class="{ dark: darkMode }">
                                <div class="mb-3 title">Syuruk</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].syuruk) }}</div>
                            </div>
                            <div class="sub-box" :class="{ active: isZohor, dark: darkMode }">
                                <div class="mb-3 title">Zohor</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].dhuhr) }}</div>
                            </div>
                            <div class="sub-box" :class="{ active: isAsar, dark: darkMode }">
                                <div class="mb-3 title">Asar</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].asr) }}</div>
                            </div>
                            <div class="sub-box" :class="{ active: isMaghrib, dark: darkMode }">
                                <div class="mb-3 title">Maghrib</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].maghrib) }}</div>
                            </div>
                            <div class="sub-box" :class="{ active: isIsyak, dark: darkMode }">
                                <div class="mb-3 title">Isyak</div>
                                <div class="lead">{{ formatTime(waktuSolat[0].isha) }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import axios from 'axios';
import { setCookie, getCookie } from "@/assets/js/cookie.js";
import zoneJson from "@/assets/json/zone.json";
import stateJson from "@/assets/json/state.json";

const $ = axios.create({
    baseURL:'https://www.e-solat.gov.my/index.php?r=esolatApi/'
});

export default {
    data() {
        return {
            isLoading: true,
            isError: false,
            logoTextColor: "#555555",
            zoneId: 'WLY01',
            interval: 0, /** 0=today, 1=week, 2=month, 3=year */
            waktuSolat: null,
            nowSolat: null,
            zones: zoneJson.zones,
            states: stateJson.states,
            options: [],
            isSubuh: false,
            isZohor: false,
            isAsar: false,
            isMaghrib: false,
            isIsyak: false,
            isDark: this.$darkMode
        }
    },
    props: ['dark-mode'],
    created() {
        // Page Title
        document.title = 'Waktu Solat by azreenbd';

        // check cookies for zone options
        let zoneCookie = getCookie("zone");
        if(zoneCookie != "") {
            // check if zone is valid
            if(this.zoneExist(zoneCookie)) {
                this.zoneId = getCookie("zone");
            }
        }
    },
    mounted() {
        this.getWaktuSolat(this.interval, this.zoneId);
        this.populateZoneSelect(this.zones, this.states);

        // Adapt logo to different theme
        if(this.darkMode) {
            this.logoTextColor = "#e7f2f5";
        } 
        else {
            this.logoTextColor = "#555555";
        }
    },
    methods: {
        getZone(id) {
            return this.zones.find(zone => zone.id === id);
        },
        zoneExist(zoneId) {
            for(var i in this.zones) {
                if(this.zones[i].id == zoneId) {
                    return true;
                }
            }
            return false;
        },
        async getWaktuSolat(interval, zone) {
            var period;

            // set cookie
            setCookie("zone", zone, 3650);

            switch(interval) {
                case 0:
                    period = 'today';
                    break;
                case 1:
                    period = 'week';
                    break;
                case 2:
                    period = 'month';
                    break;
                case 3:
                    period = 'year';
                    break;
                default:
                    period = 'today'
            }

            await $.get(`TakwimSolat&period=${period}&zone=${zone}`).then(
                response => {
                    if(response.status == "200" && response.data.status =="OK!") {
                        this.waktuSolat = response.data.prayerTime;
                        this.isLoading = false;
                        this.isError = false;
                        
                        // Find current/upcoming prayer time
                        this.nowSolat = this.currentSolat(this.waktuSolat[0]);
                    } else {
                        this.isLoading = false;
                        this.isError = true;
                        window.alert('Error');
                    }
                }
            ).catch(() => {
                this.isLoading = false;
                this.isError = true;
            });
        },
        populateZoneSelect(zones, states) {
            var options = [];
            var stateZone = [];
            
            for(var i in states) {
                stateZone = [];

                // find better way to filter this
                // this is bad for performance
                for(var j in zones) {
                    if(zones[j].state == states[i]) {
                        stateZone.push({
                            'value': zones[j].id,
                            'text': zones[j].name
                        });
                    }
                }

                options.push({
                    'label': states[i],
                    'options': stateZone
                });
            }
            
            this.options = options;
        },
        translateDay(day) {
            var hari;

            switch(day) {
                case 'Monday':
                    hari = 'Isnin';
                    break;
                case 'Tuesday':
                    hari = 'Selasa';
                    break;
                case 'Wednesday':
                    hari = 'Rabu';
                    break;
                case 'Thursday':
                    hari = 'Khamis';
                    break;
                case 'Friday':
                    hari = 'Jumaat';
                    break;
                case 'Saturday':
                    hari = 'Sabtu';
                    break;
                case 'Sunday':
                    hari = 'Ahad';
                    break;
                default:
                    hari = day;
            }

            return hari;
        },
        formatDate(date, format) {
            var d = date.split("-");
            var newDate;

            switch(format) {
                case 'DD Mon, YYYY':
                    newDate = d[0] + " " + d[1] + ", " + d[2];
                    break;
                case 'DD Mon':
                    newDate = d[0] + " " + d[1];
                    break;
                case 'YYYY':
                    newDate = d[2];
                    break;
                case 'Mon':
                    newDate = d[1];
                    break;
                case 'DD':
                    newDate = d[0];
                    break;
                case 'YY':
                    newDate = d[2];
                    break;
                default:
                    newDate = d[0] + " " + d[1] + " " + d[2];
            }
            
            return newDate;
        },
        formatTime(time) {
            var t = time.split(":");

            var hours = parseInt(t[0]);
            var minutes = parseInt(t[1]);
            var ampm = hours >= 12 ? 'pm' : 'am';

            hours = hours % 12;
            hours = hours ? hours : 12;
            hours = hours < 10 ? '0'+hours : hours;
            minutes = minutes < 10 ? '0'+minutes : minutes;

            return hours + ":" + minutes + ampm;
        },
        createDateObject(time) {
            var now = new Date();

            var t = time.split(":");

            now.setHours(t[0]);
            now.setMinutes(t[1]);
            now.setSeconds(t[2]);

            return now;
        },
        currentSolat(waktuSolat) {
            /** Current Solat 
             * Will keep display the current solat time after some time before changing to next solat time slot
             * This feature is for user that want to make sure if it is time to solat or unsure if it's already adhan */

            var now = new Date();

            var fajr = this.createDateObject(waktuSolat.fajr);
            var dhuhr = this.createDateObject(waktuSolat.dhuhr);
            var asr = this.createDateObject(waktuSolat.asr);
            var maghrib = this.createDateObject(waktuSolat.maghrib);
            var isha = this.createDateObject(waktuSolat.isha);

            var waktu = [
                { name: 'Now', date: now },
                { name: 'Subuh', date: fajr, time: waktuSolat.fajr },
                { name: 'Zohor', date: dhuhr, time: waktuSolat.dhuhr },
                { name: 'Asar', date: asr, time: waktuSolat.asr },
                { name: 'Maghrib', date: maghrib, time: waktuSolat.maghrib },
                { name: 'Isyak', date: isha, time: waktuSolat.isha }
            ];

            const sortedwaktu = waktu.sort((a, b) => a.date - b.date)

            const nowIndex = sortedwaktu.findIndex(time => time.name == 'Now');

            var nowHours;
            var afterNowHours;
            var beforeNowHours;
            var midNowHours;
            var currentWaktu;

            nowHours = sortedwaktu[nowIndex].date.getHours();
            // now is first element
            if(nowIndex == 0) {
                currentWaktu = sortedwaktu[1];
            }
            // now is last element
            else if(nowIndex == (sortedwaktu.length - 1)) {
                beforeNowHours = sortedwaktu[sortedwaktu.length - 1].date.getHours();

                midNowHours = (beforeNowHours + 22)/2;

                if(nowHours >= midNowHours) {
                    currentWaktu = sortedwaktu[0];
                }
                else {
                    currentWaktu = sortedwaktu[nowIndex - 1];
                }
            }
            else {
                afterNowHours = sortedwaktu[nowIndex + 1].date.getHours();
                beforeNowHours = sortedwaktu[nowIndex - 1].date.getHours();

                midNowHours = (beforeNowHours + afterNowHours)/2;

                if(nowHours >= midNowHours) {
                    currentWaktu = sortedwaktu[nowIndex + 1];
                }
                else {
                    currentWaktu = sortedwaktu[nowIndex - 1];
                }
            }

            switch(currentWaktu.name) {
                case "Subuh":
                    this.isSubuh = true;
                    break;
                case "Zohor":
                    this.isZohor = true;
                    break;
                case "Asar":
                    this.isAsar = true;
                    break;
                case "Maghrib":
                    this.isMaghrib = true;
                    break;
                case "Isyak":
                    this.isIsyak = true;
                    break;
            }

            return currentWaktu;
        }
    }
}
</script>

<style lang="scss">
/* Animation */
$bg-url: "~@/assets/img/pattern.png";
$bg-width: 300px;
$bg-height: 346px;

@keyframes bg-scrolling-diamond {
  0% { background-position: 0px 0px; }
  25% { background-position: 100px 100px; }
  50% { background-position: 0px 200px; }
  75% { background-position: -100px 100px; }
  100% { background-position: 0 0; }
}

@keyframes bg-scrolling-side {
  0% { background-position: $bg-width 0; }
}

/* loading */
.loader {
  border: 4px solid #7a7a7a1e;
  border-top: 4px solid #0adf3f;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 2s linear infinite;
  margin: 2em;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Main CSS */
.max-width {
    max-width: 980px;
}
.text-green {
    color: #0adf3f;
}
.box, .sub-box {
    border-radius: .75em;
    padding: .75em .75em;
    margin: .25em;
    color: #2f6c77;
}

.box.dark, .sub-box.dark {
    color: #e7f2f5;
}

.box {
    background: #fff;
    box-shadow: 0px 8px 20px rgba(0,0,0,.04);
}

.box.dark {
    background: rgb(31, 31, 31);
}

.sub-box {
    background: #f2fafc;
    width: calc(14% - .29em);
}

.sub-box.dark {
    background: #303030;
}

.sub-box.active {
    background: url($bg-url) repeat 0 0;
    background-color: #0adf3f;
    animation: bg-scrolling-side 30s infinite;
    animation-timing-function: linear;
}

.sub-box .title {
    color: #0adf3f;
    font-weight: 600;
    text-transform: uppercase;
}

.sub-box.active .title {
    color: #ffffff;
    text-shadow: 0 .09em 0 #11b139;
}

.sub-box.active.dark .lead {
    color: #303030;
}

.sub-box:first-child {
    margin-left: 0;
}

.sub-box:last-child {
    margin-right: 0;
}

select {
    background-color: #e7f2f5 !important;
    color: #2f6c77 !important;
    border: 2px solid #e7f2f5 !important;
    border-radius: .5em !important;
}

select.dark {
    background-color: #303030 !important;
    color: #b1c0c4 !important;
    border: 2px solid #303030 !important;
    border-radius: .5em !important;
}

@media only screen and (min-width: 480px) and (max-width: 840px) {
    .sub-box {
        width: calc(25% - .4em);
    }

    .sub-box:nth-child(4n) {
        margin-right: 0;
    }

    .sub-box:nth-child(5n) {
        margin-left: 0;
    }
}

@media only screen and (min-width: 240px) and (max-width: 479.98px) {
    .sub-box {
        width: calc(50% - .4em);
        margin-left: 0;
        margin-right: .5em;
    }

    .sub-box:nth-child(2n) {
        margin-right: 0;
    }
}
</style>